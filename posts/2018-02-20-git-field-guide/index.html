<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Git Field Guide - Lucas Mazza</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">    
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">



  

<link href="/css/index.min.200b3986d875de39757f4a30ef340810f506c611455481fcb56c08fa60817770.css" rel="stylesheet" />
      <meta name="description" content="Values, practices and configurations on how I use git"/>
      <meta property="og:title" content="Git Field Guide"/>
      <meta property="og:type" content="website"/>
      <meta property="og:url" content="https://lucasmazza.website/posts/2018-02-20-git-field-guide/"/>
      
      <meta property="og:description" content="Values, practices and configurations on how I use git"/>

      <meta name="twitter:card" content="summary"/>
      <meta name="twitter:site" content="@lucasmazza"/>
      <meta name="twitter:creator" content="@lucasmazza"/>

      
  </head>
  
    <body>
  

    
  <div class="py-4 border-b border-slate-300 print:hidden">
  <div class="relative flex mx-auto lg:w-4/5 px-4 lg:p-0">
    <h1 class="flex mr-auto items-center">
      
      <a href="https://lucasmazza.website/" class="font-extrabold text-2xl text-green-700 whitespace-nowrap">Lucas Mazza</a>
    </h1>

    <div class="lg:hidden">
			<button id="menu-action" class="navbar-burger flex items-center text-green-700 p-3">
				<svg class="block h-8 w-8 fill-current" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
					<title>Mobile menu</title>
					<path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path>
				</svg>
			</button>
		</div>
    <ul id="menu-target" class="hidden absolute top-full left-0 w-screen divide-y border-y bg-white lg:border-none lg:divide-none lg:static lg:flex lg:mx-auto lg:items-center lg:w-auto lg:space-x-6 lg:gap-3">
      
      
        <li class="p-4 text-xl lg:p-0 lg:text-base">
          <a href="https://lucasmazza.website/about/" class="hover:underline hover:text-green-900 ">About me</a>
        </li>
      
        <li class="p-4 text-xl lg:p-0 lg:text-base">
          <a href="https://lucasmazza.website/posts/" class="hover:underline hover:text-green-900 ">Posts</a>
        </li>
      
        <li class="p-4 text-xl lg:p-0 lg:text-base">
          <a href="https://lucasmazza.website/talks/" class="hover:underline hover:text-green-900 ">Presentations</a>
        </li>
      
        <li class="p-4 text-xl lg:p-0 lg:text-base">
          <a href="https://lucasmazza.website/htmlcss-exemplos" class="hover:underline hover:text-green-900 ">Livro HTML5 e CSS 3 →</a>
        </li>
      
        <li class="p-4 text-xl lg:p-0 lg:text-base">
          <a href="https://lucasmazza.notion.site/lucasmazza/Receitas-79a5a48a2350465dad3c57ba866f95d4" class="hover:underline hover:text-green-900 ">Receitas →</a>
        </li>
      
    </ul>
  </div>
</div>

  

  <div class="mx-auto lg:w-7/12 px-4 mt-4 lg:mt-8 lg:p-0">
    
      <div class="mb-8 lg:flex items-center">
        
          <h1 class="font-extrabold text-4xl">Git Field Guide</h1>
        

        
          <span class="inline-flex items-center text-sm mr-2 lg:mr-4 whitespace-nowrap ml-auto text-green-900">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd" />
            </svg>
            Published on Feb 20, 2018
          </span>
        
      </div>
    

    

    <article class="content-body pb-8">
      
      <p>Git has become an indispensable tool of software development, regardless of which
language or framework your team uses it. But in the other hand, it isn&rsquo;t a tool
that you can adopt, learn and be effective from day 1 - it takes time and guidance
to master it, both in the command line the integrations and practices most teams
have adopted.</p>
<p>I&rsquo;ve put up together a guide on how I see and use git on my day to day work, that
can be used as a starting both for both newcomers who are trying to grok or more
experienced professionals who want to make a more effective use of it on they
work.</p>
<p>The guide describes <a href="#values"><strong>values</strong></a> to remember and strive for when using
git, day to day <a href="#practices"><strong>practices</strong></a> and <a href="#configuration"><strong>configuration</strong></a>
suggestions that I believe are a must have for your local setup.</p>
<h2 id="values">Values</h2>
<ol>
<li>Git is more of a tool to <strong>document and communicate</strong> changes rather than storing them.
As the number of people involved or time spent in a codebase grows, you will eventually
find yourself reading more about what (and why) have change rather than reverting
changes.</li>
<li>Git is <strong>not trivial</strong>. All its power and usefulness can come with more complexity
than your one might expect. Be humble enough to understand that you might not master
it as fully as you think, and trust it to be more powerful than you currently
expect it to be.</li>
<li>Failures are <strong>usually recoverable</strong>. Whenever some git operation does not goes
how you would expect (from commiting to a wrong branch to rebases with absurds conflicts)
do not panic as not all is broken or lost, and commands like <code>reflog</code>, <code>reset</code> or
<code>rebase</code> can be extremely useful to recover and fix whatever might have happened
to your git tree. <a href="http://ohshitgit.com">Oh shit, git!</a> is a tiny but useful
resource on possible git screw ups and how to fix them.</li>
</ol>
<h2 id="practices">Practices</h2>
<ul>
<li><strong>On commit messages</strong>: care about writing good commit messages and read your git history often. Chris
Beams has probably the <a href="https://chris.beams.io/posts/git-commit/">best post on how to write commit messages</a>
and I recommend reading it rather than trying to explain on this post.</li>
<li><strong>When working with feature branches</strong>, Always keep them up to date, with both <code>git pull</code> and <code>git fetch</code>
every now and then, rebasing it early and often with its base branch (the <code>master</code>
branch on your remote repository on most cases), and fixing conflicts as soon
as they happen. Fixing conflicts on larger rebases will be harder and merges
will add noisy commits to your branch&rsquo;s history.
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git checkout feature/add-new-stuff
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># work work work...</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># download the refs that are on your remote repository, and rebase your feature</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># branch on top of whatever&#39;s is on your remote&#39;s master branch, so it will be</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># up to date. Hopefully no conflicts will need to be fixed.</span>
</span></span><span style="display:flex;"><span>git fetch origin <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  git rebase origin/master
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># if you want to make your local `master` branch is up to date as well, do</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># the following: `git pull` will fetch and rebase the references from your</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># remote repository, and then rebase the feature branch against the local</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># master branch instead.</span>
</span></span><span style="display:flex;"><span>git checkout master <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  git pull --rebase <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  git checkout - <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  git rebase master
</span></span></code></pre></div></li>
<li><strong>Use <a href="https://robots.thoughtbot.com/autosquashing-git-commits">git commit &ndash;fixup</a></strong>
and <a href="https://robots.thoughtbot.com/git-interactive-rebase-squash-amend-rewriting-history">interactive rebases</a>
to rewrite the history on your feature branches to keep its commits in order and
organized. Intermediate changes are useful when rolling changes and trying fixes, but
once the dust has settled you can rework the history to represent the final changes
you want to introduce.
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># So, you added a few files and some commits on your branch</span>
</span></span><span style="display:flex;"><span>git commit -m <span style="color:#4e9a06">&#39;Add README.md&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># [master (root-commit) f1a4ab4] Add README.md</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#  1 file changed, 0 insertions(+), 0 deletions(-)</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#  create mode 100644 README.md</span>
</span></span><span style="display:flex;"><span>$ git commit -m <span style="color:#4e9a06">&#39;Add CONTRIBUTING.md&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># [master e8644e4] Add CONTRIBUTING.md</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#  1 file changed, 0 insertions(+), 0 deletions(-)</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#  create mode 100644 CONTRIBUTING.md</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Now you need to update `README.md` and want to &#34;merge&#34; the new commit with</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># these new changes to the original commit (f1a4ab4) using an interactive rebase</span>
</span></span><span style="display:flex;"><span>git add README.md
</span></span><span style="display:flex;"><span>git commit --fixup f1a4ab4
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># [master 13168c2] fixup! Add README.md</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#  1 file changed, 0 insertions(+), 0 deletions(-)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># `--autosquash` will prepare the interactive rebase to squash 13168c2 on f1a4ab4</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># for you.</span>
</span></span><span style="display:flex;"><span>git rebase --interactive --autosquash HEAD~3
</span></span></code></pre></div></li>
<li>Not all branches/Pull Requests need to be <strong>squashed into a single commit</strong> when
doing interactive rebases. Squashing too many commits can make bisecting or
navigating through the history harder than you might want to. You can practice
this by avoiding shortcuts like the GitHub <a href="https://github.com/blog/2141-squash-your-commits">&ldquo;squash merge&rdquo;</a>
button and favoring rebases through your editor where you have more control over
the operation and review your commits to decide how they should be squashed.</li>
</ul>
<h2 id="configuration">Configuration</h2>
<ul>
<li>Configure git to always <code>rebase</code> branches when doing <code>git pull</code> with <code>git config --global pull.rebase true</code>
and never use fast forward when doing merges with <code>git config --global merge.ff false</code>. These changes
are vital to maintain sane tree histories when working with remote repositories.</li>
<li>Configure your identity with <code>git config --global user.name</code> and <code>git config --global user.email</code>
on every workstation you use. This helps to identify who&rsquo;s the real author of a changes
and is important for tools like GitHub to associate a commit with a particular person.
I also configure my local repositories with different email given the context - commits
to company related work is made using a business email while open source is commited
using my personal email - I have an alias <code>git work</code> that sets the &ldquo;work&rdquo; identity
to the current repository while my global config remains personal.</li>
<li>Set up aliases to abstract common git operations, like:
<ul>
<li>Undo the last commit (<code>git reset --soft HEAD^</code>) and keep it changes to be reviewed or
split among different commits.</li>
<li>Add new changes to the latest commit while maintaining the same message (<code>git commit --amend --no-edit</code>).
Useful when applying small fixes like typos or styleschanges without having to do
a complete <code>rebase</code> operation - don&rsquo;t forget that you will need to push it using <code>--force</code>
when working with remote repositories.</li>
<li>Run an &ldquo;automatic&rdquo; interactive rebase to apply your <code>--fixup</code> marked commits without going
through your editor to describe what the rebase should do with each commit (<code>!GIT_SEQUENCE_EDITOR=touch git rebase --interactive --autosquash</code>).</li>
</ul>
</li>
</ul>
<p><em>For more configuration settings and aliases that I use (and don&rsquo;t use), you
can check my <a href="https://github.com/lucasmazza/dotfiles/blob/master/symlinks/gitconfig">gitconfig on GitHub</a>.</em></p>

    </article>
  </div>

  <div class="py-8 flex mx-auto lg:w-7/12 border-t border-slate-300 justify-center gap-4 print:hidden">
  <p class="font-xs text-green-900">
    Copyright &copy; 2022 Lucas Mazza
  </p>
</div>


    
  <script defer src="/menu.08b9a569e417578ad09b03e0b4469fe181e7a74b3614ce1f7e2a7b98e7e99f29.js"></script>
  </body>
</html>